<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>
</head>
<body>
  <div class="container">
    <button class="checkout-btn">
      <span class="checkout-btn__icon material-icons-outlined"> shopping_cart </span>
      <span class="checkout-btn__text"> Checkout </span>
      <span class="checkout-btn__success">
        <span class="material-icons-outlined"> done </span>
        Thank you for your order!
      </span>
      <span class="checkout-btn__failure">
        <span class="material-icons-outlined"> error_outline </span>
        Order was unable to process.
      </span>
    </button>
  </div>

  <div class="container">
    <button class="checkout-btn">
      <span class="checkout-btn__icon material-icons-outlined"> shopping_cart </span>
      <span class="checkout-btn__text"> Checkout </span>
      <span class="checkout-btn__success">
        <span class="material-icons-outlined"> done </span>
        Thank you for your order!
      </span>
      <span class="checkout-btn__failure">
        <span class="material-icons-outlined"> error_outline </span>
        Order was unable to process.
      </span>
    </button>
  </div>
</body>
<script>
  const checkoutBtns = document.querySelectorAll(".checkout-btn");

checkoutBtns.forEach((btn, index) => {
  const checkoutTL = new gsap.timeline({
    paused: true
  });

  const btnText = btn.querySelector(".checkout-btn__text");
  const btnIcon = btn.querySelector(".checkout-btn__icon");
  const btnSuccess = btn.querySelector(".checkout-btn__success");
  const btnFailure = btn.querySelector(".checkout-btn__failure");

  checkoutTL
    .to(btnText, {
      opacity: 0,
      duration: 0.75,
      ease: "power4.in"
    })
    .to(
      btnIcon,
      {
        x: 150,
        delay: 0.25,
        duration: 0.75,
        opacity: 0,
        ease: "back.in(1.7)"
      },
      "<"
    );
  btn.addEventListener("click", () => {
    if (index === 0) {
      checkoutTL
        .to(btn, {
          background: "#27ae60",
          ease: "power4.out",
          width: 300
        })
        .to(
          btnSuccess,
          {
            opacity: 1,
            ease: "power4.out",
            delay: 0.25
          },
          "<"
        );
    } else {
      checkoutTL
        .to(btn, {
          background: "#c0392b",
          ease: "power4.out",
          width: 300
        })
        .to(
          btnFailure,
          {
            opacity: 1,
            ease: "power4.out",
            delay: 0.25
          },
          "<"
        );
    }

    checkoutTL.play();

    setTimeout(() => {
      checkoutTL.restart();
      checkoutTL.pause();
    }, 6000);
  });
});

</script>
</html>